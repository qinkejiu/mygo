#!/bin/sh
set -e
OUT=""
IN=""
while [ "$#" -gt 0 ]; do
  case "$1" in
    --pass-pipeline=*)
      shift
      ;;
    --export-verilog)
      shift
      ;;
    -o)
      OUT="$2"
      shift 2
      ;;
    *)
      IN="$1"
      shift
      ;;
  esac
done
if [ -z "$OUT" ]; then
  echo "missing -o" >&2
  exit 1
fi
if [ -z "$IN" ]; then
  IN="/dev/stdin"
fi
cat "$IN" > "$OUT"
cat <<'__VERILOG__'
{{ .VerilogBody }}
__VERILOG__
