module main
  ports:
    in  clk 1bu
    in  rst 1bu
  signals:
    const_1  const 32bs = 1
    const_3  const 32bs = 5
    t0_0     wire  32bs
    t1_2     wire  32bs
    t4_4     wire  32bs
    varargs  reg   32bs
  channels:
    t0       depth=4 type=32bs
    t1       depth=4 type=32bs
  process 0 main (stage=0, sequential)
    block entry
      go worker(stage=1)(ch:t0, t1)
      send t0 <- const_3
      t4_4 <- t1
      print "main observed="%!d(string=t4_4)"\n"
      return
  process 1 worker (stage=1, sequential)
    block entry
      t0_0 <- t0
      t1_2 := t0_0 + const_1
      print "worker received="%!d(string=t0_0)" produced="%!d(string=t1_2)"\n"
      send t1 <- t1_2
      return

