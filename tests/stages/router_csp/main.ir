module main
  ports:
    in  clk 1bu
    in  rst 1bu
  signals:
    const_0  const 32bu = 0
    const_11 const 32bu = 0
    const_13 const 32bu = 4
    const_17 const 32bu = 1
    const_18 const 32bu = 0
    const_19 const 32bu = 0
    const_2  const 32bu = 0
    const_21 const 32bu = 0
    const_23 const 32bu = 4
    const_26 const 32bu = 1
    const_28 const 32bu = 10
    const_31 const 32bu = 10
    const_34 const 32bu = 1
    const_35 const 32bu = 1
    const_36 const 32bu = 1
    const_38 const 32bs = 0
    const_4  const 32bu = 4
    const_40 const 32bs = 2
    const_43 const 32bs = 1
    const_7  const 32bu = 1
    const_8  const 1bu = true
    const_9  const 32bu = 1
    t0_1     wire  32bu
    t0_10    wire  32bu
    t0_20    wire  32bu
    t15_37   wire  32bs
    t16_41   wire  1bu
    t17_42   wire  1bu
    t18_22   wire  32bu
    t18_3    wire  32bu
    t18_39   wire  32bs
    t1_14    wire  1bu
    t1_24    wire  1bu
    t1_5     wire  1bu
    t2_15    wire  32bu
    t2_25    wire  32bu
    t2_6     wire  32bu
    t3_27    wire  32bu
    t4_16    wire  32bu
    t4_29    wire  32bu
    t5_30    wire  32bu
    t6_12    wire  32bu
    t7_32    wire  32bu
    t8_33    wire  32bu
    varargs  reg   32bs
  channels:
    t0       depth=1 type=32bu
    t1       depth=1 type=32bu
    t2       depth=1 type=32bu
    t3       depth=1 type=32bu
    t4       depth=2 type=1bu
  process 0 main (stage=0, sequential)
    block entry
      go consumer(stage=2)(const_0; ch:t2, t4)
      go consumer(stage=2)(const_9; ch:t3, t4)
      go router(stage=3)(ch:t0, t1, t2, t3)
      go producer(stage=5)(const_18, const_19; ch:t0)
      go producer(stage=5)(const_35, const_36; ch:t1)
      jump for.loop
    block for.loop
      t15_37 := phi[entry:const_38, for.body:t18_39]
      t16_41 := cmp(t15_37 <s const_40)
      br t16_41 ? for.body : for.done
    block for.done
      return
    block for.body
      t17_42 <- t4
      t18_39 := t15_37 + const_43
      jump for.loop
  process 1 consumer (stage=2, sequential)
    block entry
      jump for.loop
    block for.loop
      t0_1 := phi[entry:const_2, for.body:t18_3]
      t1_5 := cmp(t0_1 <u const_4)
      br t1_5 ? for.body : for.done
    block for.done
      send t4 <- const_8
      return
    block for.body
      t2_6 <- t2
      t18_3 := t0_1 + const_7
      jump for.loop
  process 2 router (stage=3, sequential)
    block entry
      jump for.loop
    block for.loop
      t0_10 := phi[entry:const_11, for.body:t6_12]
      t1_14 := cmp(t0_10 <u const_13)
      br t1_14 ? for.body : for.done
    block for.done
      return
    block for.body
      t2_15 <- t0
      t4_16 <- t1
      t6_12 := t0_10 + const_17
      jump for.loop
  process 3 producer (stage=5, sequential)
    block entry
      jump for.loop
    block for.loop
      t0_20 := phi[entry:const_21, for.body:t18_22]
      t1_24 := cmp(t0_20 <u const_23)
      br t1_24 ? for.body : for.done
    block for.done
      return
    block for.body
      t2_25 := const_19 + t0_20
      t3_27 := t2_25 & const_26
      t4_29 := const_18 * const_28
      t5_30 := t4_29 + t0_20
      t7_32 := const_18 * const_31
      t8_33 := t7_32 + t0_20
      print "producer "%!d(string=const_18)" sent dest="%!d(string=t3_27)" payload="%!d(string=t8_33)"\n"
      t18_22 := t0_20 + const_34
      jump for.loop

